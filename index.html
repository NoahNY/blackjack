<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Blackjack</title>
</head>

<style>
h1, p, textarea {
    font-family: Arial, Arial, Helvetica, sans-serif;
}
p {
	color: #333333;
	font-weight: bold;
	border: thin;
	background: #ddbf00;
    text-align: center;
}
textarea {
	font-size: 25px;
	width: 320px;
	height: 125px;
}
button {
	font-size: 20px;
}
h1 {
    color: #333333;
    text-align: center;
}
body {
	background-color: #333333;
	color: #ffffff;
	font-weight: bold;
}
#Begin {
	font-size: 40px;
}
.Header {
    padding: 0px;
    border: 3px solid #DDDDDD;
    background-color: #ddbf00;
    margin: left;
    width: 10%;
}
.body0 {
	background-color: #ffffff;
	width: 17.5%;
	float: left;
	margin-left: 360px;
}
.body1 {
	background-color: #ffffff;
	width: 17.5%;
	float: right;
	margin-right: 360px;
}
.BeginBtn {
	text-align: center;
}
#Debug {
	width: 100%;
}
</style>

<body>
<div class="Header">
	<h1>Blackjack ♠♥♣♦</h1>
</div><br>

<div class="BeginBtn">
	<button id="Begin" class="Begin">Begin</button>
</div>

<div class="body0">
	<p>The Player Box</p>
	<button id="Hit">Hit</button><button id="Stand">Stand</button><br>
	<button id="Sum">Sum</button><button id="Display">Display Cards</button><br>
	<textarea id="box" readonly>...</textarea><br>
</div>
<div class="body1">
	<p>The AI Box</p>
	<button id="Check">Check</button><br>
	<textarea id="box1" readonly>...</textarea><br>
</div>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
	<h2>Instructions:</h2>
	<input type="checkbox" id="myCheck" onclick="myFunction()">
	<h2 id="text" style="display:none">Press 'Begin' to play. Press 'Hit' to draw a card. The 'Sum' button gives you your sum, and 'Display' shows your cards. Once you're satisfied, press 'Stand'. The AI will think for a bit. Once it's done, press the 'Check' button and see who wins!</h2>
<br><br><a href="https://bicyclecards.com/how-to-play/blackjack/" target="_blank">How To Play Blackjack</a>
<br><br><br>
<button id="DebugBtn">Debug</button>
<textarea id="Debug" readonly></textarea>
<br><br>
<h2>All programming done by Noah Young, although much was sourced (see logbook)</h2>
</body>
<script>
//Deck Creation Functions:
function getRandomInt(min, max) {
	min = Math.ceil(min);
	max = Math.floor(max);
	return Math.floor(Math.random() * (max - min) + min);
}
//Variables
var player0_hand = [], ai_hand = [], randomint, randomint2, display, sum = 0;
var begun = false, lost = false, ai_lost = false, displaying_cards = false, summing_cards = false, ai_playing = false;
var suits = ['♠', '♥', '♣', '♦'];
var ranks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', 'T', 'J', 'Q', 'K'];
var deck = [];
//Debug Function:
function debug() {
	sum_of_aihand()
	sum_of_playerhand()
	chance_debug = 21-sum_ai
	if (begun == true) {
		Debug.textContent = 'The remaining cards in the deck are: \n' + deck + '\nThe PLAYER has cards ' + player0_hand + ' with a sum of: ' + sum + '\nThe AI has cards ' + ai_hand + ' with a sum of: ' + sum_ai + '\nThe AI will roll a random whole number between 0 and 10. If that number is less than ' + chance_debug + ', which is 21 minus the AI sum, it will take another card.'
	} else {
		alert('Press "Begin" to play')
	}
}
DebugBtn.onclick = debug;
//Help Funcion:
function myFunction() {
	var checkBox = document.getElementById("myCheck");
	var text = document.getElementById("text");
	if (checkBox.checked == true){
		text.style.display = "block";
	} else {
 	text.style.display = "none";
  }
}

//Player Functions:
for (var a = 0; a < 4; a++) {
	for (var b = 0; b < 13; b++) {
		deck.push(ranks[b] + suits[a]);
	}
}
function add_to_playerhand() {
	randomint = getRandomInt(0, deck.length)
	player0_hand.push(deck[randomint])
	deck.splice(randomint, 1)
}
function sum_of_playerhand() {
	sum = 0;
	for (i = 0; i < player0_hand.length; i++) {
		c = player0_hand[i].substring(0, 1)
		if (c == 'A') {
			c = 1;
		} else if (c == 'T' || c == 'J' || c == 'Q' || c == 'K') {
			c = 10;
		}
		sum = sum + parseInt(c, 10);
	}
	return sum
}
function begin() {
	if (begun == false) {
		add_to_playerhand()
		add_to_playerhand()
		add_to_aihand()
		add_to_aihand()
		display = 'Your cards are: \n' + player0_hand;
		box.textContent = display;
		begun = true;
	}
}
function hit() {
	if (begun == true && lost == false) {
		add_to_playerhand()
		sum_of_playerhand()
		if (sum > 21) {
			display = 'Your cards are: ' + player0_hand + '\nThe sum is greater than 21. You lose!'
			lost = true;
		} else {
			display = 'Your cards are: ' + player0_hand;
		}
		box.textContent = display;
	} else if (begun == false) {
		alert('Press "Begin" to play')
	}
}
function sumcards() {
	if (begun == true && summing_cards == false) {
		display = 'The sum of your cards is: ' + sum_of_playerhand();
		box.textContent = display;
		summing_cards = true;
		displaying_cards = false;
	} else if (begun == true && summing_cards == true) {
		alert('You are already looking at the sum of your cards!')
	} else if (begun == false) {
		alert('Press "Begin" to play')
	}
}
function display() {
	if (begun == true && displaying_cards == false) {
		display = 'Your cards are: \n' + player0_hand;
		box.textContent = display;
		summing_cards = false;
		displaying_cards = true;
	} else if (begun == true && displaying_cards == true) {
		alert('You are already looking at your cards!')
	} else if (begun == false) {
		alert('Press "Begin" to play')
	}
}
Display.onclick = display;
Sum.onclick = sumcards;
Hit.onclick = hit;
Begin.onclick = begin;
Stand.onclick = ai_turn;
// AI Functions:
function add_to_aihand() {
	randomint = getRandomInt(0, deck.length)
	ai_hand.push(deck[randomint])
	deck.splice(randomint, 1)
}
function sum_of_aihand() {
	sum_ai = 0;
	for (i = 0; i < ai_hand.length; i++) {
		c = ai_hand[i].substring(0, 1)
		if (c == 'A') {
			c = 1;
		} else if (c == 'T' || c == 'J' || c == 'Q' || c == 'K') {
			c = 10;
		}
		sum_ai = sum_ai + parseInt(c, 10);
	}
	return sum_ai
}
function ai_turn() {
	ai_playing = true;
	box1.textContent = "The AI 'stands'";
	if (lost == false && ai_lost == false && begun == true) {
		sum_of_aihand()
		hit_or_stand()
	} else if (begun == false) {
		alert('Press "Begin" to play')
	} else if (lost == true) {
		alert('You lost already...')
	}
}
function hit_or_stand() {
	sum_of_aihand()
	chance = 21 - sum_ai
	randomint2 = getRandomInt(0, 10)
		if (chance >= 10) {
			setTimeout(() => {ai_turn()}, 1000);
			box1.textContent = "The AI 'hits'";
			add_to_aihand()
		} else {
			if (chance >= randomint2 && ai_lost == false) {
				setTimeout(() => {ai_turn()}, 1000);
				box1.textContent = "The AI 'hits'";
				add_to_aihand()
			}
		}
}
function check() {
	if (ai_playing == true && lost == false) {
		sum_of_aihand()
		sum_of_playerhand()
		box.textContent = "Your cards were " + player0_hand + " with a sum of " + sum;
		box1.textContent = "The AI's cards were " + ai_hand + " with a sum of " + sum_ai;
		if (sum_ai > 21) {
			alert('Player win. AI card sum was over 21!')
		} else {
			if (begun == true) {
				if (sum_ai > sum) {
					alert("Player loss. AI card sum was greater than players'!")
				} else if (sum_ai < sum) {
					alert("Player win. AI card sum was less than player's!")
				} else if(sum_ai = sum) {
					alert("Player tie. AI card sum was equal to player's!")
				} else if (begun == false) {
					alert('Press "Begin" to play')
				}
			}
		}
	} else {
		alert('You already lost...')
	}
}
Check.onclick = check;
</script>
</html>
