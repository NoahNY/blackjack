<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Blackjack</title>
</head>

<style>
h1, p, textarea {
    font-family: Arial, Arial, Helvetica, sans-serif;
}
p {
	color: #333333;
	font-weight: bold;
    border: 3px solid #DDDDDD;
    background-color: #ddbf00;
    margin: margin-left;
    width: 160px;
}
textarea {
	font-size: 25px;
	width: 320px;
	height: 125px;
}
button {
	font-size: 20px;
}
h1 {
    color: #333333;
    text-align: center;
}
body {
	background-color: #333333;
}
#Begin {
	font-size: 40px;
}
.Header {
    padding: 0px;
    border: 3px solid #DDDDDD;
    background-color: #ddbf00;
    margin: auto;
    width: 40%;
}
.body0{
	background-color: #ffffff;
	width: 17.5%;
	float: left;
}
.body1{
	background-color: #ffffff;
	width: 17.5%;
	float: left;
}
.BeginBtn{
	text-align: center;
}
</style>

<body>
<div class="Header">
	<h1>Blackjack!</h1>
</div><br>

<div class="BeginBtn">
	<button id="Begin" class="Begin">Begin</button>
</div>

<div class="body0">
	<button id="Hit">Hit</button><button id="Stand">Stand</button><br>
	<button id="Sum">Sum</button><button id="Display">Display Cards</button><br>
	<p>Terminal:</p>
	<textarea id="box" readonly>Click 'Begin' to play!</textarea><br>
	<textarea id="debug" readonly>debug...</textarea>
</div>
<div class="body1">
	<p>Terminal:</p>
	<textarea id="box1" readonly>ai</textarea><br>
	<textarea id="debug1" readonly>debug...</textarea>
</div>
</body>

<script>
//Deck Creation Functions:
function getRandomInt(min, max) {
	min = Math.ceil(min);
	max = Math.floor(max);
	return Math.floor(Math.random() * (max - min) + min);
}

//Variables
var player0_hand = [], ai_hand = [], randomint, randomint2, display, sum = 0, d;
var begun = false, lost = false, ai_lost = false, displaying_cards = false, summing_cards = false;
var suits = ['♠', '♥', '♣', '♦'];
var ranks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', 'T', 'J', 'Q', 'K'];
var deck = [];

//Player Functions:
for (var a = 0; a < 4; a++) {
	for (var b = 0; b < 13; b++) {
		deck.push(ranks[b] + suits[a]);
	}
}
function add_to_playerhand() {
	randomint = getRandomInt(0, deck.length)
	player0_hand.push(deck[randomint])
	deck.splice(randomint, 1)
}
function sum_of_playerhand() {
	sum = 0;
	for (i = 0; i < player0_hand.length; i++) {
		c = player0_hand[i].substring(0, 1)
		if (c == 'A') {
			c = 1;
		} else if (c == 'T' || c == 'J' || c == 'Q' || c == 'K') {
			c = 10;
		}
		sum = sum + parseInt(c, 10);
	}
	return sum
}
function begin() {
	if (begun == false) {
		add_to_playerhand()
		add_to_playerhand()
		add_to_aihand()
		add_to_aihand()
		display = 'Your cards are: \n' + player0_hand;
		box.textContent = display;
		debug.textContent = deck;
		debug1.textContent = ai_hand;
		begun = true;
	}
}
function hit() {
	if (begun == true && lost == false) {
		add_to_playerhand()
		sum_of_playerhand()
		if (sum > 21) {
			display = 'Your cards are: ' + player0_hand + '\nThe sum is greater than 21. You lose!'
			lost = true;
		} else {
			display = 'Your cards are: ' + player0_hand;
		}
		box.textContent = display;
		debug.textContent = deck;
	} else if (begun == false) {
		alert('Press "Begin" to play')
	}
}
function sumcards() {
	if (begun == true && summing_cards == false) {
		display = 'The sum of your cards is: ' + sum_of_playerhand();
		box.textContent = display;
		summing_cards = true;
		displaying_cards = false;
	} else if (begun == true && summing_cards == true) {
		alert('You are already looking at the sum of your cards!')
	} else if (begun == false) {
		alert('Press "Begin" to play')
	}
}
function display() {
	if (begun == true && displaying_cards == false) {
		display = 'Your cards are: \n' + player0_hand;
		box.textContent = display;
		summing_cards = false;
		displaying_cards = true;
	} else if (begun == true && displaying_cards == true) {
		alert('You are already looking at your cards!')
	} else if (begun == false) {
		alert('Press "Begin" to play')
	}
}
Display.onclick = display;
Sum.onclick = sumcards;
Hit.onclick = hit;
Begin.onclick = begin;
Stand.onclick = ai_turn;
// AI Functions:
function add_to_aihand() {
	randomint = getRandomInt(0, deck.length)
	ai_hand.push(deck[randomint])
	deck.splice(randomint, 1)
}
function sum_of_aihand() {
	sum = 0;
	for (i = 0; i < ai_hand.length; i++) {
		c = ai_hand[i].substring(0, 1)
		if (c == 'A') {
			c = 1;
		} else if (c == 'T' || c == 'J' || c == 'Q' || c == 'K') {
			c = 10;
		}
		sum = sum + parseInt(c, 10);
	}
	return sum
}
function ai_turn() {
	if (lost == false && ai_lost == false && begun == true) {
		sum_of_aihand()
		hit_or_stand()
			if (sum >= 21) {
				ai_lost = true;
			}
	} else if (begun == false) {
		alert('Press "Begin" to play')
	}
}
function hit_or_stand() {
	chance = 21 - sum
	randomint2 = getRandomInt(0, 10)
	debug1.textContent = 'Sum = ' + sum + '\nCards = ' + ai_hand + '\n' + chance + '\n' + randomint2;
		if (chance >= 10) {
			add_to_aihand()
			setTimeout(() => {ai_turn()}, 1000);
		} else {
			if (chance >= randomint2 && ai_lost == false) {
				setTimeout(() => {ai_turn()}, 1000);
				add_to_aihand()
				debug1.textContent = 'Sum = ' + sum + '\nCards = ' + ai_hand + '\n' + chance + '\n' + randomint2;
			}
		}
}
</script>


</html>
